/* ============================================
   DETAIL PAGES - Page-Specific Styles
   ProjectDetailPage, ClientDetailPage, etc.
   ============================================ */

/* Map page - 60/40 split for map and sidebar (legacy; used when map content is added) */
body.nexo-av-theme [class*="flex-1"][class*="flex"][class*="gap-4"] {
  width: 100% !important;
}

body.nexo-av-theme [style*="width: '60%'"],
body.nexo-av-theme-dark [style*="width: '60%'"] {
  width: 60% !important;
  flex: 0 0 60% !important;
}

body.nexo-av-theme [style*="width: '40%'"],
body.nexo-av-theme-dark [style*="width: '40%'"] {
  width: 40% !important;
  flex: 0 0 40% !important;
}

/* Ensure map container uses full height */
body.nexo-av-theme [class*="LeadMap"],
body.nexo-av-theme-dark [class*="LeadMap"],
body.nexo-av-theme div[class*="h-full"][class*="w-full"][class*="relative"],
body.nexo-av-theme-dark div[class*="h-full"][class*="w-full"][class*="relative"] {
  height: 100% !important;
  width: 100% !important;
  min-height: 500px !important;
}

/* Force map page container to use full space */
body.nexo-av-theme div[class*="w-full"][class*="flex"][class*="flex-col"],
body.nexo-av-theme-dark div[class*="w-full"][class*="flex"][class*="flex-col"] {
  width: 100% !important;
  max-width: none !important;
}

/* Ensure flex containers in map pages use full width and height */
body.nexo-av-theme div[class*="flex-1"][class*="flex"][class*="gap-4"],
body.nexo-av-theme-dark div[class*="flex-1"][class*="flex"][class*="gap-4"] {
  width: 100% !important;
  max-width: none !important;
  height: 100% !important;
  min-height: 500px !important;
}

/* Ensure MapContainer from Leaflet has proper height */
body.nexo-av-theme .leaflet-container,
body.nexo-av-theme-dark .leaflet-container {
  height: 100% !important;
  width: 100% !important;
  min-height: 500px !important;
}

/* ============================================
   MAP PAGE - Layout (Mapa, pestañas, listado)
   ============================================ */
body.nexo-av-theme .map-page,
body.nexo-av-theme-dark .map-page {
  min-height: 0;
}

body.nexo-av-theme .map-page__tabs-content,
body.nexo-av-theme-dark .map-page__tabs-content {
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}

body.nexo-av-theme .map-page__content,
body.nexo-av-theme-dark .map-page__content {
  min-height: 0;
  display: flex;
  flex-direction: row;
}

body.nexo-av-theme .map-page__map,
body.nexo-av-theme-dark .map-page__map {
  min-height: 300px;
  flex: 0 0 60%;
}

body.nexo-av-theme .map-page__list,
body.nexo-av-theme-dark .map-page__list {
  flex: 0 0 40%;
  min-height: 0;
}

/* ============================================
   LEAD MAP SIDEBAR - Remove shadows
   ============================================ */

/* Remove shadows from LeadMapSidebar cards */
body.nexo-av-theme [class*="LeadMapSidebar"] [class*="Card"],
body.nexo-av-theme-dark [class*="LeadMapSidebar"] [class*="Card"],
body.nexo-av-theme [class*="LeadMapSidebar"] .card,
body.nexo-av-theme-dark [class*="LeadMapSidebar"] .card {
  box-shadow: none !important;
}

/* Remove shadows from client list buttons in LeadMapSidebar */
body.nexo-av-theme [class*="LeadMapSidebar"] button[class*="rounded-md"],
body.nexo-av-theme-dark [class*="LeadMapSidebar"] button[class*="rounded-md"] {
  box-shadow: none !important;
}

/* Main content container - Forzar visualización en desktop */
@media (min-width: 550px) {
  body.nexo-av-theme main[class*="hidden"][class*="md:block"],
  body.nexo-av-theme-dark main[class*="hidden"][class*="md:block"] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
}

/* Asegurar que el contenedor principal no tenga padding que separe el sidebar */
body.nexo-av-theme>div[class*="min-h-screen"],
body.nexo-av-theme-dark>div[class*="min-h-screen"] {
  padding-left: 0 !important;
  margin-left: 0 !important;
}

/* Asegurar que el flex container no tenga padding */
body.nexo-av-theme div.flex[class*="w-"] {
  padding-left: 0 !important;
  margin-left: 0 !important;
}

/* ============================================
   PROJECT DETAIL PAGE - Estilos específicos
   ============================================ */

/* Header de navegación superior */
body.nexo-av-theme [class*="ProjectDetailPage"] > div:first-child,
body.nexo-av-theme-dark [class*="ProjectDetailPage"] > div:first-child {
  position: sticky !important;
  top: 0 !important;
  z-index: 10 !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
}

/* Grid layout de 3 columnas */
body.nexo-av-theme [class*="grid"][class*="grid-cols-12"][class*="h-full"],
body.nexo-av-theme-dark [class*="grid"][class*="grid-cols-12"][class*="h-full"] {
  height: 100% !important;
  min-height: 0 !important;
}

/* Sidebar izquierdo - Información del proyecto */
body.nexo-av-theme [class*="lg:col-span-3"][class*="border-r"],
body.nexo-av-theme-dark [class*="lg:col-span-3"][class*="border-r"] {
  border-right: 1px solid hsl(var(--border)) !important;
  background: hsl(var(--card) / 0.5) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
}

/* Sidebar derecho - Información adicional */
body.nexo-av-theme [class*="lg:col-span-3"][class*="border-l"],
body.nexo-av-theme-dark [class*="lg:col-span-3"][class*="border-l"] {
  border-left: 1px solid hsl(var(--border)) !important;
  background: hsl(var(--card) / 0.5) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
}

/* Contenido principal con tabs */
body.nexo-av-theme [class*="lg:col-span-6"][class*="flex"][class*="flex-col"],
body.nexo-av-theme-dark [class*="lg:col-span-6"][class*="flex"][class*="flex-col"] {
  background: hsl(var(--background)) !important;
  min-height: 0 !important;
}

/* Tabs container */
body.nexo-av-theme [class*="Tabs"][class*="w-full"][class*="h-full"],
body.nexo-av-theme-dark [class*="Tabs"][class*="w-full"][class*="h-full"] {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  min-height: 0 !important;
}

/* Tabs list - Header de tabs */
body.nexo-av-theme [class*="TabsList"][class*="bg-transparent"],
body.nexo-av-theme-dark [class*="TabsList"][class*="bg-transparent"] {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
}

/* Tabs trigger - Botones de tabs */
body.nexo-av-theme [class*="TabsTrigger"][class*="border-b-2"],
body.nexo-av-theme-dark [class*="TabsTrigger"][class*="border-b-2"] {
  border-bottom: 2px solid transparent !important;
  transition: all 0.2s ease-in-out !important;
  position: relative !important;
}

body.nexo-av-theme [class*="TabsTrigger"][class*="data-[state=active]:border-primary"],
body.nexo-av-theme-dark [class*="TabsTrigger"][class*="data-[state=active]:border-primary"] {
  border-bottom-color: hsl(var(--primary)) !important;
  color: hsl(var(--foreground)) !important;
  font-weight: 500 !important;
}

body.nexo-av-theme [class*="TabsTrigger"]:hover,
body.nexo-av-theme-dark [class*="TabsTrigger"]:hover {
  background-color: hsl(var(--accent)) !important;
  color: hsl(var(--foreground)) !important;
}

/* Tabs content - Contenido de las tabs */
body.nexo-av-theme [class*="TabsContent"][class*="mt-0"],
body.nexo-av-theme-dark [class*="TabsContent"][class*="mt-0"] {
  margin-top: 0 !important;
  flex: 1 !important;
  overflow-y: auto !important;
  min-height: 0 !important;
}

/* Cards de KPIs en sidebar izquierdo */
body.nexo-av-theme [class*="bg-gradient-to-br"][class*="from-blue-50"],
body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-blue-50"] {
  background: linear-gradient(to bottom right, 
    hsl(217 91% 60% / 0.1), 
    hsl(217 91% 60% / 0.05)) !important;
  border: 1px solid hsl(217 91% 60% / 0.2) !important;
}

body.nexo-av-theme [class*="bg-gradient-to-br"][class*="from-emerald-50"],
body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-emerald-50"] {
  background: linear-gradient(to bottom right, 
    hsl(142 76% 36% / 0.1), 
    hsl(142 76% 36% / 0.05)) !important;
  border: 1px solid hsl(142 76% 36% / 0.2) !important;
}

body.nexo-av-theme [class*="bg-gradient-to-br"][class*="from-orange-50"],
body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-orange-50"] {
  background: linear-gradient(to bottom right, 
    hsl(25 95% 53% / 0.1), 
    hsl(25 95% 53% / 0.05)) !important;
  border: 1px solid hsl(25 95% 53% / 0.2) !important;
}

/* Cards en modo oscuro */
body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-blue-950"],
body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-blue-950"] {
  background: linear-gradient(to bottom right, 
    hsl(217 91% 10% / 0.4), 
    hsl(217 91% 10% / 0.3)) !important;
  border: 1px solid hsl(217 91% 60% / 0.3) !important;
}

body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-emerald-950"],
body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-emerald-950"] {
  background: linear-gradient(to bottom right, 
    hsl(142 76% 10% / 0.4), 
    hsl(142 76% 10% / 0.3)) !important;
  border: 1px solid hsl(142 76% 36% / 0.3) !important;
}

body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-orange-950"],
body.nexo-av-theme-dark [class*="bg-gradient-to-br"][class*="from-orange-950"] {
  background: linear-gradient(to bottom right, 
    hsl(25 95% 10% / 0.4), 
    hsl(25 95% 10% / 0.3)) !important;
  border: 1px solid hsl(25 95% 53% / 0.3) !important;
}

/* Cards de información en sidebar derecho */
body.nexo-av-theme [class*="Card"][class*="border"][class*="bg-white/50"],
body.nexo-av-theme-dark [class*="Card"][class*="border"][class*="bg-white/50"] {
  background: hsl(var(--card) / 0.5) !important;
  border: 1px solid hsl(var(--border)) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
}

/* Badges de estado del proyecto */
body.nexo-av-theme [class*="Badge"][class*="px-3"][class*="py-1.5"],
body.nexo-av-theme-dark [class*="Badge"][class*="px-3"][class*="py-1.5"] {
  padding: 0.375rem 0.75rem !important;
  font-size: 0.75rem !important;
  font-weight: 600 !important;
  border: 1px solid !important;
}

/* Estados de carga - Skeletons */
body.nexo-av-theme [class*="animate-pulse"][class*="bg-slate-100"],
body.nexo-av-theme-dark [class*="animate-pulse"][class*="bg-slate-100"] {
  background: hsl(var(--muted)) !important;
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite !important;
}

body.nexo-av-theme-dark [class*="animate-pulse"][class*="bg-slate-800"] {
  background: hsl(var(--muted)) !important;
}

/* Scrollbars personalizados para sidebars */
body.nexo-av-theme [class*="overflow-y-auto"]::-webkit-scrollbar,
body.nexo-av-theme-dark [class*="overflow-y-auto"]::-webkit-scrollbar {
  width: 6px !important;
}

body.nexo-av-theme [class*="overflow-y-auto"]::-webkit-scrollbar-track,
body.nexo-av-theme-dark [class*="overflow-y-auto"]::-webkit-scrollbar-track {
  background: transparent !important;
}

body.nexo-av-theme [class*="overflow-y-auto"]::-webkit-scrollbar-thumb,
body.nexo-av-theme-dark [class*="overflow-y-auto"]::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3) !important;
  border-radius: 3px !important;
}

body.nexo-av-theme [class*="overflow-y-auto"]::-webkit-scrollbar-thumb:hover,
body.nexo-av-theme-dark [class*="overflow-y-auto"]::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.5) !important;
}

/* Mejoras de espaciado en secciones */
body.nexo-av-theme [class*="space-y-5"],
body.nexo-av-theme-dark [class*="space-y-5"] {
  gap: 1.25rem !important;
}

body.nexo-av-theme [class*="space-y-4"],
body.nexo-av-theme-dark [class*="space-y-4"] {
  gap: 1rem !important;
}

/* Hover states mejorados */
body.nexo-av-theme [class*="hover:shadow-sm"],
body.nexo-av-theme-dark [class*="hover:shadow-sm"]:hover {
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05) !important;
  transition: box-shadow 0.2s ease-in-out !important;
}

/* Transiciones suaves */
body.nexo-av-theme [class*="transition-all"],
body.nexo-av-theme-dark [class*="transition-all"] {
  transition: all 0.2s ease-in-out !important;
}

body.nexo-av-theme [class*="transition-colors"],
body.nexo-av-theme-dark [class*="transition-colors"] {
  transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out, border-color 0.2s ease-in-out !important;
}

/* Responsive - Ajustes para móvil */
@media (max-width: 1024px) {
  body.nexo-av-theme [class*="lg:col-span-3"],
  body.nexo-av-theme-dark [class*="lg:col-span-3"] {
    border-left: none !important;
    border-right: none !important;
    border-bottom: 1px solid hsl(var(--border)) !important;
  }
  
  body.nexo-av-theme [class*="lg:col-span-6"],
  body.nexo-av-theme-dark [class*="lg:col-span-6"] {
    border-top: 1px solid hsl(var(--border)) !important;
  }
}